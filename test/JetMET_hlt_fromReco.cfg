#
# CMSSW cfg file for HLT JetMET trigger paths.  Assumes jet reconstruction has 
# already been carried out
#
process JetMetHLT  = {

    #include "input/LPCMC-111-RECO-QCD-pt${ptmin}-${ptmax}.cff"
    #replace PoolSource.maxEvents = ${nevts}

    source = PoolSource { 
      untracked vstring fileNames = {
      "file:gammas_gen-sim-reco_50Gev_test.root"}
      untracked int32 maxEvents = 20
    }

    # do l1extra from MCTruth for now
    include "L1Trigger/L1ExtraFromMCTruthProd/data/l1extramctruth.cfi"
    replace l1extramctruth.singleJet140Prescale = 1
    replace l1extramctruth.singleJet60Prescale = 1
    replace l1extramctruth.singleJet20Prescale = 1
    replace l1extramctruth.minBiasPrescale = 1

    # the JetMet trigger paths, assuming reconstruction has already been done
    include "HLTrigger/JetMET/test/JetMET_l1.cff"
    include "HLTrigger/JetMET/test/JetMET_reco_mcone5.cff"

    untracked PSet options = {
	untracked bool wantSummary = true  # default is false
	untracked bool makeTriggerResults = true
	vstring listOfTriggers = {"*"}  # get results for all triggers
    }

    module glob = HLTMakeSummaryObjects { }

    module out = PoolOutputModule {
	untracked string fileName = "hlt_gammas_gen-sim-reco_50Gev_test.root"
	untracked vstring outputCommands =
	{ # drop a bunch of branches to keep output file size reasonable
	    "drop *",
	    "keep CaloTowersSorted_*_*_*",
	    "keep recoCaloJets_*_*_*",
	    "keep recoGenJets_*_*_*",
	    "keep recoCaloMETs_*_*_*",
	    "keep recoGenMETs_*_*_*",
	    "keep recoHLTFilterObjectBase_*_*_*",
	    "keep recoHLTFilterObjectWithRefs_*_*_*",
	    "keep recoHLTPathObject_*_*_*",
	    "keep recoHLTGlobalObject_*_*_*",
	    //"keep recoCandidatesOwned_*_*_*",
	    "keep l1extraL1EmParticles_*_*_*",
	    "keep l1extraL1EtMissParticle_*_*_*",
	    "keep l1extraL1JetParticles_*_*_*",
	    "keep l1extraL1MuonParticles_*_*_*",
	    "keep l1extraL1ParticleMaps_*_*_*",
	    "keep edmHepMCProduct_*_*_*",
	    "keep edmTriggerResults_*_*_*"
	}
    }
    #replace out.outputCommands = { "keep *" }

    endpath outpath = { glob, out }
    # endpath outpath = { out }
}
